# picasso_api
Тестовое задание для компании ПИКАССО. API для загрузки и асинхронной обработки файлов.

<img src="https://i.imgur.com/eUUBQaQ.jpg" width=256>

Данный сервис предоставляет API для загрузки и асинхронной обработки данных в БД. Реализованы возможности загрузки файлов на сервер и получения списка уже загруженных и обработанных файлов.

*Что и как реализовано:*

- Проект представляет собой веб приложение, которое релизовано на Python  с помощью фреймворков **Django** и **Django REST Framework.** Выполнение асинхронной задачи легло на плечи **Celery** в связке с брокером **RabbitMQ,** а за хранение данных и доступ к ним отвечает
реляционная БД **PostgreSQL.**
- Веб-приложение даёт доступ к двум эндпоинтам: *'upload/'*, валидный POST-запрос к которому загружает выбранный вами файл на сервер **Django**, а так же *'files/'*, который возвращает список всех загруженных на севрер файлов.

*'upload/'* request body:
```json
{
    "file": {
        "type": "multipart/form-data"
    }
}
```

*'upload/'* response json-schema:
```json
{
    "file": "url",
    "uploaded_at": "string"
    "processed": "bool"
}
```

*'files/'* response json-schema:
```json
{
    "count": "integer",
    "next": "integer",
    "previous": "integer",
    "results": [
        {
            "file": "url",
            "uploaded_at": "datetime string",
            "processed": "bool"
        },
    ]
}
```
- Приложение запускается и работает в контейнерах **Docker.**
- С помощью библиотеки **python-magic** реализован механизм загрузки файлов с сортировкой по директориям, в зависимости от типа загружаемого файла.
- Предусмотрена обработка ошибок в представлениях и возврат соответстующего кода состояния.
- Покрытие тестами.

### Чтобы запустить:

Клонируйте репозиторий в директорию, из которой будете запускать проект:

```BASH
git clone git@github.com:Ferdinand-I/picasso_api.git
```

Перейдите в директорию проекта:

```BASH
cd picasso_api/
```

Проект собран и работает в контейнерах **Docker**, чтобы запустить их в фоновом режиме выполните следующую команду:

```BASH
docker compose up -d
```

Ура! Сервис запущен локально и готов к работе!

Эндпоинт для загрузки файла:

http://127.0.0.1:8000/api/v1.0/upload/

Эндпоинт для получения списка всех загруженных файлов:

http://127.0.0.1:8000/api/v1.0/files/

P.S. 

Для улучшения показателя RPS и оптимизации приложения при большом трафике лучше всего переписать кодовую базу под микросервисную архитектуру с помощью тех же асинхронных фреймворков и броекров сообщений. А так же пользоваться услугами облачных провайдеро для динамической регулироки ресурсов машины.

